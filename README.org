* Taoline: Легчайшая Строка — функциональный минимализм для Emacs

В истинном равновесии не нужно ничего лишнего — и taoline отражает лишь то, что действительно занимает твоё внимание сейчас. Эта модельная строка выскакивает в echo area тогда, когда ей есть что сообщить, — но исчезает, не оставив следа, как тихий поток.

** Что делает taoline?

- Показывает только необходимое — в моменте и внизу окна (echo area).
- Архитектура строится на чистых функциях: каждый сегмент работает с буфером, не трогая глобальное состояние.
- За основу взята простота: сегменты легко добавлять, менять местами, убирать.
- Настройка интуитивна — ясна любому, даже тому, кто впервые увидел Emacs.
- Отсутствие таймеров: обновление происходит мягко — только при действиях пользователя.

** Первый шаг

Установить taoline можно так:

#+BEGIN_SRC emacs-lisp
(use-package taoline
  :ensure t
  :config
  (taoline-mode 1))
#+END_SRC

Чтобы включить taoline:

#+BEGIN_SRC emacs-lisp
(taoline-mode 1)
#+END_SRC

** Индивидуальная настройка: танец сегментов

Все сегменты собираются в списке `taoline-segments`. Каждый записан как чистая функция (buffer → string):

#+BEGIN_SRC emacs-lisp
(setq taoline-segments
      '((:left taoline-segment-icon-and-buffer taoline-segment-git-branch)
        (:center taoline-segment-echo-message)
        (:right taoline-segment-project-name taoline-segment-time)))
#+END_SRC

Менять порядок, добавлять и убирать сегменты — просто редактируй этот список. Левый (:left), центральный (:center), правый (:right) блоки — между ними пространство возникнет, если нужно.

** Медитирующий над расширением: как создать свой сегмент

Каждая часть taoline — отдельная функция, не касающаяся ни других, ни глобального мира. Создать новый сегмент — дело одной запятой:

#+BEGIN_SRC emacs-lisp
(taoline-define-segment taoline-segment-buffer-size (buffer)
  "Показывает размер буфера."
  (format "%.1fK" (/ (buffer-size buffer) 1024.0)))
#+END_SRC

Затем добавь его в нужный раздел:

#+BEGIN_SRC emacs-lisp
(push 'taoline-segment-buffer-size (alist-get :right taoline-segments))
#+END_SRC

** Пусть echo area течёт спокойно

Taoline показывает себя в echo area только тогда, когда там нет других сообщений. Всё, что важнее — например, minibuffer, isearch или ваши сообщения — имеет приоритет. Стандартная modeline скрывается (если хочется — это поведение опционально).

** Частые вопросы

- *Где моя mode-line?*  
  Исчезла в знак уважения к Пустоте. Она вернётся, когда отключишь `taoline-mode`.

- *Почему иногда сообщение taoline исчезает?*  
  Когда Emacs чем-то занят — выводит свои уведомления или работает minibuffer — taoline уступает дорогу.

- *Как добавить что-то своё?*  
  Просто напиши функцию (buffer) → string, зарегистрируй через `taoline-define-segment`, и помести симовол этой функции в нужном месте списка сегментов.

** Где учиться искусству taoline?

Загляни в исходный код или на [GitHub](https://github.com/11111000000/taoline) — там всё ясно и предельно лаконично. Логи работы (если нужно) в буфере `*taoline-logs*`.

** Пример работы

#+ATTR_ORG: :width 80%
[[file:screenshot-taoline.png]]

---

Пустое пространство в строке — место для тишины.
